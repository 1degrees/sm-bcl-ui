"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),b={key:0,class:"audio-cover"},j=["src","alt"],D={key:1,class:"audio-cover"},R={class:"audio-info"},X={class:"audio-title"},$={class:"audio-artist"},z={class:"audio-controls"},A={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},O={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U={class:"audio-progress"},q={class:"time-display"},I={class:"current-time"},F={class:"duration"},G={class:"audio-volume"},H={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},J={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K={key:2,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},L=["src","autoplay","loop","muted","volume","preload"],Q=e.defineComponent({__name:"index",props:{src:{},title:{default:""},artist:{default:""},cover:{default:""},autoplay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},volume:{default:1},preload:{default:"metadata"}},emits:["play","pause","ended","timeupdate","volumechange","error"],setup(n,{expose:u,emit:v}){const a=n,r=v,V=e.ref(),l=e.ref(),s=e.ref(!1),c=e.ref(a.muted),m=e.ref(a.volume),i=e.ref(0),d=e.ref(0),f=e.ref(0),y=t=>{const o=Math.floor(t/60),g=Math.floor(t%60);return`${o}:${g.toString().padStart(2,"0")}`},h=()=>{l.value&&(s.value?l.value.pause():l.value.play())},N=()=>{s.value=!0,r("play")},B=()=>{s.value=!1,r("pause")},w=()=>{s.value=!1,r("ended")},x=()=>{l.value&&(i.value=l.value.currentTime,d.value=l.value.duration||0,f.value=i.value/d.value*100||0,r("timeupdate",i.value))},C=()=>{l.value&&(m.value=l.value.volume,c.value=l.value.muted,r("volumechange",m.value))},T=t=>{const o=t.target.error;o&&r("error",new Error(o.message))},M=t=>{if(!l.value||!t.currentTarget)return;const o=t.currentTarget.getBoundingClientRect(),p=(t.clientX-o.left)/o.width*100/100*d.value;l.value.currentTime=p},P=t=>{if(!l.value||!t.currentTarget)return;const o=t.currentTarget.getBoundingClientRect(),p=(t.clientX-o.left)/o.width*100/100;l.value.volume=p,l.value.muted=!1},S=()=>{l.value&&(l.value.muted=!l.value.muted)};return u({play:()=>{var t;(t=l.value)==null||t.play()},pause:()=>{var t;(t=l.value)==null||t.pause()},toggle:()=>{h()},seek:t=>{l.value&&(l.value.currentTime=t)},setVolume:t=>{l.value&&(l.value.volume=Math.max(0,Math.min(1,t)),l.value.muted=!1)},setMuted:t=>{l.value&&(l.value.muted=t)},getCurrentTime:()=>i.value,getDuration:()=>d.value,getPlaying:()=>s.value}),e.onMounted(()=>{c.value=a.muted,m.value=a.volume}),e.onUnmounted(()=>{var t;(t=l.value)==null||t.pause()}),e.watch(()=>a.muted,t=>{c.value=t,l.value&&(l.value.muted=t)}),e.watch(()=>a.volume,t=>{m.value=t,l.value&&(l.value.volume=t)}),e.watch(()=>a.src,()=>{i.value=0,d.value=0,f.value=0,s.value=!1}),(t,o)=>(e.openBlock(),e.createElementBlock("div",{class:"audio-player",ref_key:"playerRef",ref:V},[n.cover?(e.openBlock(),e.createElementBlock("div",b,[e.createElementVNode("img",{src:n.cover,alt:n.title},null,8,j)])):(e.openBlock(),e.createElementBlock("div",D,[...o[0]||(o[0]=[e.createElementVNode("div",{style:{width:"100%",height:"100%","background-color":"#f3f4f6",display:"flex","align-items":"center","justify-content":"center"}},[e.createElementVNode("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e.createElementVNode("polygon",{points:"5 3 19 12 5 21 5 3"})])],-1)])])),e.createElementVNode("div",R,[e.createElementVNode("h3",X,e.toDisplayString(n.title||"未知标题"),1),e.createElementVNode("p",$,e.toDisplayString(n.artist||"未知艺术家"),1)]),e.createElementVNode("div",z,[e.createElementVNode("button",{class:"audio-play-btn",onClick:h},[s.value?(e.openBlock(),e.createElementBlock("svg",O,[...o[2]||(o[2]=[e.createElementVNode("rect",{x:"6",y:"4",width:"4",height:"16"},null,-1),e.createElementVNode("rect",{x:"14",y:"4",width:"4",height:"16"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",A,[...o[1]||(o[1]=[e.createElementVNode("polygon",{points:"5 3 19 12 5 21 5 3"},null,-1)])]))])]),e.createElementVNode("div",U,[e.createElementVNode("div",{class:"progress-container",onClick:M},[e.createElementVNode("div",{class:"progress-bar",style:e.normalizeStyle({width:`${f.value}%`})},null,4),e.createElementVNode("div",{class:"progress-handle",style:e.normalizeStyle({left:`${f.value}%`})},null,4)]),e.createElementVNode("div",q,[e.createElementVNode("span",I,e.toDisplayString(y(i.value)),1),e.createElementVNode("span",F,e.toDisplayString(y(d.value)),1)])]),e.createElementVNode("div",G,[e.createElementVNode("button",{class:"volume-btn",onClick:S},[c.value||n.volume===0?(e.openBlock(),e.createElementBlock("svg",H,[...o[3]||(o[3]=[e.createElementVNode("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},null,-1),e.createElementVNode("line",{x1:"23",y1:"9",x2:"17",y2:"15"},null,-1),e.createElementVNode("line",{x1:"17",y1:"9",x2:"23",y2:"15"},null,-1)])])):n.volume<.5?(e.openBlock(),e.createElementBlock("svg",J,[...o[4]||(o[4]=[e.createElementVNode("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},null,-1),e.createElementVNode("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",K,[...o[5]||(o[5]=[e.createElementVNode("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},null,-1),e.createElementVNode("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"},null,-1),e.createElementVNode("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"},null,-1)])]))]),e.createElementVNode("div",{class:"volume-slider",onClick:P},[e.createElementVNode("div",{class:"volume-bar",style:e.normalizeStyle({width:`${(c.value?0:n.volume)*100}%`})},null,4),e.createElementVNode("div",{class:"volume-handle",style:e.normalizeStyle({left:`${(c.value?0:n.volume)*100}%`})},null,4)])]),e.createElementVNode("audio",{ref_key:"audioRef",ref:l,src:n.src,autoplay:n.autoplay,loop:n.loop,muted:n.muted,volume:n.volume,preload:n.preload,onPlay:N,onPause:B,onEnded:w,onTimeupdate:x,onVolumechange:C,onError:T},null,40,L)],512))}}),W=(n,u)=>{const v=n.__vccOpts||n;for(const[a,r]of u)v[a]=r;return v},E=W(Q,[["__scopeId","data-v-f5016fea"]]),k={AudioPlayer:E},Y=n=>{for(const u in k)n.component(u,k[u])},Z={install:Y,...k};exports.AudioPlayer=E;exports.default=Z;
