var ue=require("./theme/index.css");Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),j={key:0,class:"audio-cover"},D=["src","alt"],R={key:1,class:"audio-cover"},X={class:"audio-info"},$={class:"audio-title"},z={class:"audio-artist"},_={class:"audio-controls"},A={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},q={class:"audio-progress"},O={class:"time-display"},F={class:"current-time"},G={class:"duration"},H={class:"audio-volume"},I={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},J={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K={key:2,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},L=["src","autoplay","loop","muted","volume","preload"],h=e.defineComponent({__name:"index",props:{src:{},title:{default:""},artist:{default:""},cover:{default:""},autoplay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},volume:{default:1},preload:{default:"metadata"}},emits:["play","pause","ended","timeupdate","volumechange","error"],setup(n,{expose:d,emit:E}){const a=n,u=E,V=e.ref(),l=e.ref(),r=e.ref(!1),s=e.ref(a.muted),m=e.ref(a.volume),c=e.ref(0),i=e.ref(0),v=e.ref(0),k=t=>{const o=Math.floor(t/60),f=Math.floor(t%60);return`${o}:${f.toString().padStart(2,"0")}`},y=()=>{l.value&&(r.value?l.value.pause():l.value.play())},N=()=>{r.value=!0,u("play")},B=()=>{r.value=!1,u("pause")},w=()=>{r.value=!1,u("ended")},x=()=>{l.value&&(c.value=l.value.currentTime,i.value=l.value.duration||0,v.value=c.value/i.value*100||0,u("timeupdate",c.value))},C=()=>{l.value&&(m.value=l.value.volume,s.value=l.value.muted,u("volumechange",m.value))},T=t=>{const o=t.target.error;o&&u("error",new Error(o.message))},M=t=>{if(!l.value||!t.currentTarget)return;const o=t.currentTarget.getBoundingClientRect(),g=(t.clientX-o.left)/o.width*100/100*i.value;l.value.currentTime=g},P=t=>{if(!l.value||!t.currentTarget)return;const o=t.currentTarget.getBoundingClientRect(),g=(t.clientX-o.left)/o.width*100/100;l.value.volume=g,l.value.muted=!1},S=()=>{l.value&&(l.value.muted=!l.value.muted)};return d({play:()=>{var t;(t=l.value)==null||t.play()},pause:()=>{var t;(t=l.value)==null||t.pause()},toggle:()=>{y()},seek:t=>{l.value&&(l.value.currentTime=t)},setVolume:t=>{l.value&&(l.value.volume=Math.max(0,Math.min(1,t)),l.value.muted=!1)},setMuted:t=>{l.value&&(l.value.muted=t)},getCurrentTime:()=>c.value,getDuration:()=>i.value,getPlaying:()=>r.value}),e.onMounted(()=>{s.value=a.muted,m.value=a.volume}),e.onUnmounted(()=>{var t;(t=l.value)==null||t.pause()}),e.watch(()=>a.muted,t=>{s.value=t,l.value&&(l.value.muted=t)}),e.watch(()=>a.volume,t=>{m.value=t,l.value&&(l.value.volume=t)}),e.watch(()=>a.src,()=>{c.value=0,i.value=0,v.value=0,r.value=!1}),(t,o)=>(e.openBlock(),e.createElementBlock("div",{class:"audio-player",ref_key:"playerRef",ref:V},[n.cover?(e.openBlock(),e.createElementBlock("div",j,[e.createElementVNode("img",{src:n.cover,alt:n.title},null,8,D)])):(e.openBlock(),e.createElementBlock("div",R,[...o[0]||(o[0]=[e.createElementVNode("div",{style:{width:"100%",height:"100%","background-color":"#f3f4f6",display:"flex","align-items":"center","justify-content":"center"}},[e.createElementVNode("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e.createElementVNode("polygon",{points:"5 3 19 12 5 21 5 3"})])],-1)])])),e.createElementVNode("div",X,[e.createElementVNode("h3",$,e.toDisplayString(n.title||"未知标题"),1),e.createElementVNode("p",z,e.toDisplayString(n.artist||"未知艺术家"),1)]),e.createElementVNode("div",_,[e.createElementVNode("button",{class:"audio-play-btn",onClick:y},[r.value?(e.openBlock(),e.createElementBlock("svg",U,[...o[2]||(o[2]=[e.createElementVNode("rect",{x:"6",y:"4",width:"4",height:"16"},null,-1),e.createElementVNode("rect",{x:"14",y:"4",width:"4",height:"16"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",A,[...o[1]||(o[1]=[e.createElementVNode("polygon",{points:"5 3 19 12 5 21 5 3"},null,-1)])]))])]),e.createElementVNode("div",q,[e.createElementVNode("div",{class:"progress-container",onClick:M},[e.createElementVNode("div",{class:"progress-bar",style:e.normalizeStyle({width:`${v.value}%`})},null,4),e.createElementVNode("div",{class:"progress-handle",style:e.normalizeStyle({left:`${v.value}%`})},null,4)]),e.createElementVNode("div",O,[e.createElementVNode("span",F,e.toDisplayString(k(c.value)),1),e.createElementVNode("span",G,e.toDisplayString(k(i.value)),1)])]),e.createElementVNode("div",H,[e.createElementVNode("button",{class:"volume-btn",onClick:S},[s.value||n.volume===0?(e.openBlock(),e.createElementBlock("svg",I,[...o[3]||(o[3]=[e.createElementVNode("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},null,-1),e.createElementVNode("line",{x1:"23",y1:"9",x2:"17",y2:"15"},null,-1),e.createElementVNode("line",{x1:"17",y1:"9",x2:"23",y2:"15"},null,-1)])])):n.volume<.5?(e.openBlock(),e.createElementBlock("svg",J,[...o[4]||(o[4]=[e.createElementVNode("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},null,-1),e.createElementVNode("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",K,[...o[5]||(o[5]=[e.createElementVNode("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},null,-1),e.createElementVNode("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"},null,-1),e.createElementVNode("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"},null,-1)])]))]),e.createElementVNode("div",{class:"volume-slider",onClick:P},[e.createElementVNode("div",{class:"volume-bar",style:e.normalizeStyle({width:`${(s.value?0:n.volume)*100}%`})},null,4),e.createElementVNode("div",{class:"volume-handle",style:e.normalizeStyle({left:`${(s.value?0:n.volume)*100}%`})},null,4)])]),e.createElementVNode("audio",{ref_key:"audioRef",ref:l,src:n.src,autoplay:n.autoplay,loop:n.loop,muted:n.muted,volume:n.volume,preload:n.preload,onPlay:N,onPause:B,onEnded:w,onTimeupdate:x,onVolumechange:C,onError:T},null,40,L)],512))}}),p={AudioPlayer:h},Q=n=>{for(const d in p)n.component(d,p[d])},W={install:Q,...p};exports.AudioPlayer=h;exports.default=W;
